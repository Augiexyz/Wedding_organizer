{% load humanize %}
{% load static %}
<!DOCTYPE html>
<html lang="id" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wedding Organizer Samarinda - Wujudkan Pernikahan Impianmu</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/feather-icons"></script>

    <style>
        body { font-family: 'Inter', sans-serif; background-color: #FDF2F8; }
        .font-serif-display { font-family: 'Playfair Display', serif; }
        .text-primary-dark { color: #831843; }
        .bg-primary-dark { background-color: #831843; }
        
        /* Tombol Utama */
        .btn-primary {
            background-color: #DB2777;
            color: white;
            transition: all 0.3s ease;
            box-shadow: 0 4px 14px 0 rgba(219, 39, 119, 0.39);
        }
        .btn-primary:hover {
            background-color: #BE185D;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(219, 39, 119, 0.23);
        }

        /* Efek Hero */
        .hero-bg {
            background-image: url('https://images.unsplash.com/photo-1519225468359-69df9639c3da?q=80&w=1920&auto=format&fit=crop');
            background-size: cover;
            background-position: center;
            background-attachment: fixed; 
        }
        .hero-overlay {
            background: linear-gradient(to bottom, rgba(0,0,0,0.4), rgba(0,0,0,0.7));
        }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <!-- Navbar -->
    <header class="bg-white/95 backdrop-blur-md shadow-sm fixed w-full z-50 transition-all duration-300">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="{% url 'index' %}" class="text-2xl font-serif-display text-primary-dark font-bold flex items-center">
                <i data-feather="heart" class="w-6 h-6 mr-2 text-pink-600 fill-current"></i>
                Wedding Organizer Samarinda
            </a>
            
            <!-- Menu Navigasi Tengah -->
            <div class="hidden lg:flex items-center space-x-6">
                <a href="#beranda" class="text-pink-600 font-bold hover:text-pink-800 transition">Beranda</a>
                <a href="#cara-pesan" class="text-gray-600 hover:text-pink-600 transition">Cara Pesan</a>
                <a href="#penyedia-wo" class="text-gray-600 hover:text-pink-600 transition">Penyedia WO</a>
                <a href="#tentang" class="text-gray-600 hover:text-pink-600 transition">Tentang Kami</a>
                <a href="#kontak" class="text-gray-600 hover:text-pink-600 transition">Kontak</a>
            </div>

            <!-- Menu User Kanan -->
            <div class="flex items-center space-x-4">
                {% if user.is_authenticated %}
                    <span class="text-gray-700 hidden sm:block font-medium">Hai, {{ user.first_name|default:user.username }}</span>
                    
                    {% if user.profil.role == 'wo' %}
                        <a href="{% url 'dashboard_wo' %}" class="bg-pink-100 text-pink-700 px-4 py-2 rounded-full text-sm font-bold hover:bg-pink-200 transition">Dashboard</a>
                    {% elif user.profil.role == 'customer' %}
                        <a href="{% url 'status_pesanan' %}" class="text-gray-600 hover:text-pink-600 transition" title="Status Pesanan"><i data-feather="shopping-bag"></i></a>
                    {% endif %}
                    
                    <form action="{% url 'logout' %}" method="post" class="inline">
                        {% csrf_token %}
                        <button type="submit" class="text-gray-400 hover:text-red-500 transition ml-2" title="Logout">
                            <i data-feather="log-out"></i>
                        </button>
                    </form>
                {% else %}
                    <a href="{% url 'login' %}" class="text-gray-600 hover:text-pink-600 font-medium mr-2">Masuk</a>
                    <a href="{% url 'registrasi' %}" class="btn-primary px-6 py-2 rounded-full text-sm shadow-none">Daftar</a>
                {% endif %}
            </div>
        </nav>
    </header>

    <!-- 1. SECTION BERANDA (HERO) -->
    <<!-- 1. SECTION BERANDA (HERO) -->
<section id="beranda" class="relative h-screen flex items-center justify-center overflow-hidden">
    
    <video autoplay loop muted playsinline class="absolute inset-0 w-full h-full object-cover">
        <source src="{% static 'videos/hero.mp4' %}" type="video/mp4">
    </video>

    <div class="absolute inset-0 bg-black/40"></div>

    <div class="relative z-10 text-center text-white px-4 max-w-4xl mx-auto mt-16">
        <span class="uppercase tracking-widest text-xs md:text-sm font-bold bg-white/20 px-4 py-1 rounded-full backdrop-blur-sm border border-white/30 mb-6 inline-block">
            Platform Pernikahan Terpercaya Samarinda
        </span>

        <h1 class="text-5xl md:text-7xl font-bold font-serif-display mb-6 leading-tight drop-shadow-lg">
            Wujudkan Pernikahan <br/> <span class="text-pink-300 italic">Impian Anda</span>
        </h1>

        <p class="text-lg md:text-xl mb-10 text-gray-100 max-w-2xl mx-auto font-light leading-relaxed">
            Temukan Wedding Organizer profesional, paket lengkap, dan gedung impian dalam satu platform yang mudah digunakan.
        </p>

        <div class="flex flex-col sm:flex-row justify-center gap-4">
            <a href="{% url 'daftar_wo' %}" class="btn-primary text-lg px-8 py-4 rounded-full shadow-xl hover:shadow-pink-500/50 transition transform hover:-translate-y-1 block text-center">
                Cari Wedding Organizer
            </a>
            
            <a href="{% url 'daftar_gedung' %}" class="bg-white text-gray-800 hover:bg-gray-50 font-bold py-4 px-8 rounded-full shadow-lg transition transform hover:-translate-y-1 flex items-center justify-center">
                <i data-feather="map-pin" class="w-5 h-5 mr-2 text-pink-600"></i> Lihat Gedung
            </a>
        </div>
        </div>

</section>

    <!-- 2. SECTION CARA PEMESANAN -->
    <section id="cara-pesan" class="py-24 bg-white relative z-20 -mt-10 rounded-t-[3rem] shadow-[0_-10px_40px_rgba(0,0,0,0.05)]">
        <div class="container mx-auto px-6">
            <div class="text-center mb-16">
                <h2 class="text-3xl font-bold text-primary-dark font-serif-display">Cara Mudah Memesan</h2>
                <p class="text-gray-500 mt-2">Hanya 3 langkah sederhana menuju hari bahagia.</p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-10">
                <!-- Step 1 -->
                <div class="p-8 rounded-3xl bg-pink-50 hover:bg-pink-100 transition duration-300 text-center group border border-pink-100 relative">
                    <div class="absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 w-10 h-10 bg-primary-dark text-white rounded-full flex items-center justify-center font-bold shadow-lg">1</div>
                    <div class="w-16 h-16 bg-white rounded-full flex items-center justify-center mx-auto mb-6 shadow-md group-hover:scale-110 transition duration-300">
                        <i data-feather="user-plus" class="w-8 h-8 text-pink-600"></i>
                    </div>
                    <h3 class="text-xl font-bold text-gray-800 mb-3">Daftar & Pilih WO</h3>
                    <p class="text-gray-600 leading-relaxed text-sm">Buat akun, lalu cari Wedding Organizer atau Gedung yang sesuai dengan gaya dan budget Anda.</p>
                </div>

                <!-- Step 2 -->
                <div class="p-8 rounded-3xl bg-pink-50 hover:bg-pink-100 transition duration-300 text-center group border border-pink-100 relative">
                    <div class="absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 w-10 h-10 bg-primary-dark text-white rounded-full flex items-center justify-center font-bold shadow-lg">2</div>
                    <div class="w-16 h-16 bg-white rounded-full flex items-center justify-center mx-auto mb-6 shadow-md group-hover:scale-110 transition duration-300">
                        <i data-feather="grid" class="w-8 h-8 text-pink-600"></i>
                    </div>
                    <h3 class="text-xl font-bold text-gray-800 mb-3">Pilih Paket & Gedung</h3>
                    <p class="text-gray-600 leading-relaxed text-sm">Pilih paket pernikahan yang Anda inginkan. Jika paket termasuk gedung, pilih gedung yang tersedia.</p>
                </div>

                <!-- Step 3 -->
                <div class="p-8 rounded-3xl bg-pink-50 hover:bg-pink-100 transition duration-300 text-center group border border-pink-100 relative">
                    <div class="absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 w-10 h-10 bg-primary-dark text-white rounded-full flex items-center justify-center font-bold shadow-lg">3</div>
                    <div class="w-16 h-16 bg-white rounded-full flex items-center justify-center mx-auto mb-6 shadow-md group-hover:scale-110 transition duration-300">
                        <i data-feather="send" class="w-8 h-8 text-pink-600"></i>
                    </div>
                    <h3 class="text-xl font-bold text-gray-800 mb-3">Pesan & Konfirmasi</h3>
                    <p class="text-gray-600 leading-relaxed text-sm">Isi formulir pemesanan. WO akan menerima pesanan Anda dan menghubungi untuk konfirmasi selanjutnya.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- 3. SECTION PENYEDIA WO (Featured) -->
    <section id="penyedia-wo" class="py-20 bg-gradient-to-b from-pink-50 to-white">
        <div class="container mx-auto px-6">
            <div class="flex justify-between items-end mb-12">
                <div>
                    <span class="text-pink-600 font-bold tracking-wider uppercase text-sm">Pilihan Terbaik</span>
                    <h2 class="text-3xl font-bold text-primary-dark font-serif-display mt-1">Wedding Organizer Unggulan</h2>
                </div>
                <a href="{% url 'daftar_wo' %}" class="hidden md:flex items-center text-gray-600 hover:text-pink-600 font-bold transition">
                    Lihat Semua <i data-feather="arrow-right" class="w-4 h-4 ml-2"></i>
                </a>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                {% for wo in profil_wos_unggulan %}
                
                <!-- FIX DISINI: Tambahkan 'relative' dan hapus 'overflow-hidden' pada elemen yang menghalangi -->
                <div class="bg-white rounded-2xl shadow-lg hover:shadow-2xl transition duration-300 border border-gray-100 flex flex-col h-full group relative">
                    
                    <!-- Cover Image Container (HAPUS overflow-hidden) -->
                    <div class="h-48 bg-gray-200 relative rounded-t-2xl"> 
                        {% if wo.foto_sampul %}
                            <!-- Tambahkan class rounded-t-2xl agar sudut atas tetap melengkung -->
                            <img src="{{ wo.foto_sampul.url }}" alt="{{ wo.nama_brand }}" class="w-full h-full object-cover transform group-hover:scale-105 transition duration-700 rounded-t-2xl">
                        {% else %}
                            <div class="w-full h-full bg-gradient-to-r from-pink-400 to-purple-500 rounded-t-2xl"></div>
                        {% endif %}
                        
                        <!-- Profile Picture Container (TAMBAHKAN z-20) -->
                        <div class="absolute -bottom-8 left-6 z-20">
                            <div class="w-16 h-16 rounded-full border-4 border-white bg-white shadow-md overflow-hidden">
                                {% if wo.logo %}
                                    <img src="{{ wo.logo.url }}" class="w-full h-full object-cover">
                                {% else %}
                                    <div class="w-full h-full bg-pink-100 flex items-center justify-center text-xl font-bold text-pink-600">
                                        {{ wo.nama_brand|slice:":1" }}
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>

                    <!-- Content Container (TAMBAHKAN relative z-10) -->
                    <div class="p-6 pt-10 flex-grow flex flex-col relative z-10 bg-white rounded-b-2xl">
                        <div class="flex justify-between items-start">
                            <div>
                                <h3 class="text-xl font-bold text-gray-900 group-hover:text-pink-600 transition">{{ wo.nama_brand }}</h3>
                                <p class="text-xs text-gray-500 mb-4 flex items-center"><i data-feather="map-pin" class="w-3 h-3 mr-1"></i> Samarinda</p>
                            </div>
                            <span class="inline-flex items-center px-2 py-1 rounded-full bg-green-50 text-green-700 text-xs font-medium border border-green-100">
                                <i data-feather="check-circle" class="w-3 h-3 mr-1"></i> Verified
                            </span>
                        </div>

                        <p class="text-gray-600 text-sm mb-6 line-clamp-2 flex-grow">
                            {{ wo.deskripsi|default:"Wedding organizer profesional siap membantu hari bahagia Anda." }}
                        </p>

                        <div class="border-t border-gray-100 pt-4 flex justify-between items-center text-sm">
                            <div>
                                <span class="block text-gray-400 text-xs">Mulai Dari</span>
                                <span class="font-bold text-pink-600 text-lg">Rp {{ wo.min_price|intcomma }}</span>
                            </div>
                            <span class="bg-pink-50 text-pink-700 px-3 py-1 rounded-full text-xs font-bold">
                                {{ wo.active_paket_count }} Paket
                            </span>
                        </div>
                        
                        <!-- Link ke Detail WO -->
                        <a href="{% url 'detail_wo' wo.user.id %}" class="mt-4 w-full block text-center border border-pink-200 text-pink-600 hover:bg-pink-600 hover:text-white font-bold py-2 rounded-xl transition duration-300">
                            Kunjungi Profil
                        </a>
                    </div>
                </div>
                {% empty %}
                <div class="col-span-full text-center py-12 bg-white rounded-2xl border border-dashed border-gray-300">
                    <p class="text-gray-500">Belum ada Wedding Organizer yang ditampilkan.</p>
                </div>
                {% endfor %}
            </div>
            
            <div class="mt-8 text-center md:hidden">
                <a href="{% url 'daftar_wo' %}" class="btn-primary px-6 py-3 rounded-full shadow">Lihat Semua WO</a>
            </div>
        </div>
    </section>

    <!-- 4. SECTION TENTANG KAMI -->
    <section id="tentang" class="py-20 bg-white">
        <div class="container mx-auto px-6">
            <div class="flex flex-col md:flex-row items-center gap-12">
                <div class="md:w-1/2">
                    <div class="relative">
                        <div class="absolute -top-4 -left-4 w-full h-full border-2 border-pink-200 rounded-3xl z-0"></div>
                        <img src="https://images.unsplash.com/photo-1523438097201-512ae7d59c44?q=80&w=800&auto=format&fit=crop" alt="Tentang Wedding Organizer Samarinda" class="rounded-3xl shadow-2xl relative z-10 w-full object-cover h-80 md:h-96">
                    </div>
                </div>
                <div class="md:w-1/2">
                    <h2 class="text-3xl md:text-4xl font-bold font-serif-display text-primary-dark mb-6">Mengenal Wedding Organizer Samarinda</h2>
                    <p class="text-gray-600 mb-6 leading-relaxed">
                        Wedding Organizer Samarinda lahir dari keinginan untuk mempermudah calon pengantin di Samarinda menemukan vendor pernikahan yang tepat. Kami percaya bahwa setiap pernikahan adalah momen sakral yang harus direncanakan dengan sempurna tanpa stres berlebih.
                    </p>
                    <div class="grid grid-cols-2 gap-4">
                        <div class="flex items-center">
                            <div class="w-10 h-10 rounded-full bg-pink-100 flex items-center justify-center mr-3"><i data-feather="users" class="w-5 h-5 text-pink-600"></i></div>
                            <span class="font-semibold text-gray-800">Vendor Profesional</span>
                        </div>
                        <div class="flex items-center">
                            <div class="w-10 h-10 rounded-full bg-pink-100 flex items-center justify-center mr-3"><i data-feather="shield" class="w-5 h-5 text-pink-600"></i></div>
                            <span class="font-semibold text-gray-800">Transaksi Aman</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- 5. SECTION KONTAK -->
    <section id="kontak" class="py-20 bg-gray-50">
        <div class="container mx-auto px-6">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold font-serif-display text-primary-dark">Hubungi Kami</h2>
                <p class="text-gray-500 mt-2">Kami siap membantu menjawab pertanyaan Anda.</p>
            </div>
            <div class="bg-white p-2 rounded-3xl shadow-xl max-w-5xl mx-auto overflow-hidden">
                <div class="grid grid-cols-1 md:grid-cols-2">
                    <div class="h-80 md:h-auto bg-gray-200 rounded-2xl overflow-hidden">
                        <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d127663.22037992925!2d117.0799175279619!3d-0.5021078278253683!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x2df67f11c4708605%3A0x4030bfbcaf7e5d0!2sSamarinda%2C%20Samarinda%20City%2C%20East%20Kalimantan!5e0!3m2!1sen!2sid!4f13.1!5m2!1sen!2sid" width="100%" height="100%" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                    </div>
                    <div class="p-8 md:p-12 flex flex-col justify-center">
                        <h3 class="text-2xl font-bold text-gray-800 mb-6">Informasi Kontak</h3>
                        <div class="space-y-6">
                            <div class="flex items-start">
                                <div class="w-12 h-12 rounded-xl bg-pink-50 flex items-center justify-center mr-4 flex-shrink-0"><i data-feather="map-pin" class="w-6 h-6 text-pink-600"></i></div>
                                <div><h4 class="font-bold text-gray-900">Alamat Kantor</h4><p class="text-gray-600 text-sm mt-1">Jl. Pahlawan No. 123, Samarinda</p></div>
                            </div>
                            <div class="flex items-start">
                                <div class="w-12 h-12 rounded-xl bg-pink-50 flex items-center justify-center mr-4 flex-shrink-0"><i data-feather="mail" class="w-6 h-6 text-pink-600"></i></div>
                                <div><h4 class="font-bold text-gray-900">Email</h4><p class="text-gray-600 text-sm mt-1">support@weddingorganizersamarinda.com</p></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-900 text-gray-300 py-12">
        <div class="container mx-auto px-6">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8 mb-8">
                <div class="col-span-1 md:col-span-2">
                    <a href="#" class="text-2xl font-serif-display text-white font-bold flex items-center mb-4">
                        <i data-feather="heart" class="w-6 h-6 mr-2 text-pink-500 fill-current"></i>
                        Wedding Organizer Samarinda
                    </a>
                    <p class="text-gray-400 text-sm leading-relaxed max-w-xs">
                        Platform marketplace Wedding Organizer terpercaya di Samarinda.
                    </p>
                </div>
                <!-- ... Footer Links ... -->
            </div>
            <div class="border-t border-gray-800 pt-8 text-center text-sm text-gray-500">
                &copy; 2024 Wedding Organizer Samarinda. All rights reserved.
            </div>
        </div>
    </footer>

    <script>
        feather.replace();
        
        // Navbar scroll effect
        window.addEventListener('scroll', function() {
            const header = document.querySelector('header');
            if (window.scrollY > 50) {
                header.classList.add('bg-white/95', 'shadow-md');
                header.classList.remove('bg-white/95', 'shadow-sm');
            } else {
                header.classList.remove('bg-white/95', 'shadow-md');
                header.classList.add('bg-white/95', 'shadow-sm');
            }
        });
    </script>
</body>
</html>